

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Open Neurophysiology Environment &mdash; IBL Library  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> IBL Library
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="source/ibllib.html">ibllib API</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/oneibl.html">oneibl API</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/alf.html">alf API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">IBL Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Open Neurophysiology Environment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/one.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="open-neurophysiology-environment">
<span id="open-neurophysiology-environment"></span><h1>Open Neurophysiology Environment<a class="headerlink" href="#open-neurophysiology-environment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="neurodata-standardization-needs-a-new-approach">
<span id="neurodata-standardization-needs-a-new-approach"></span><h2>Neurodata standardization needs a new approach<a class="headerlink" href="#neurodata-standardization-needs-a-new-approach" title="Permalink to this headline">¶</a></h2>
<p>Neurophysiology badly needs data standardization. A scientist should be able to analyze data collected from multiple labs using a single analysis program, without spending untold hours figuring out new file formats.</p>
<p>Substantial efforts have recently been put into developing neurodata file standards, with the most successful being the <a class="reference external" href="https://www.nwb.org/">Neurodata Without Borders</a> (NWB) format. The NWB format has a comprehensive and careful design that allows one to store all data and metadata pertaining to a neurophysiology experiment. Nevertheless, its comprehensive design also means a steep learning curve for potential users, which has limited its adoption.</p>
<p>The same thing has happened before in other scientific fields. For example, the open microscopy environment (<a class="reference external" href="https://www.openmicroscopy.org/">OME</a>) group developed a standard file format for microscopy data, which is hardly ever used. But they also developed a set of loader functions, which allow scientists to analyze data in multiple native formats using a single program. These loader functions successfully standardized microscopy data. In principle, NWB also allows data providers to reimplement a set of API functions – however the comprehensive nature of NWB again means this API is complex, limiting its adoption.</p>
</div>
<div class="section" id="how-the-open-neurophysiology-environment-would-work">
<span id="how-the-open-neurophysiology-environment-would-work"></span><h2>How the open neurophysiology environment would work<a class="headerlink" href="#how-the-open-neurophysiology-environment-would-work" title="Permalink to this headline">¶</a></h2>
<p>Here we propose a solution to this problem: a set of three simple loader functions, that would allow users to access and search data from multiple sources. To adopt the standard, data providers can use any format they like - all they need to do is implement these three functions to fetch the data from their server and load it into Python or MATLAB. Users can then analyze this data with the same exact code as data from any other provider. The learning curve will be simple, and the loader functions would be enough for around 90% of common use cases.</p>
<p>By a <em>data provider</em> we mean an organization that hosts a set of neurophysiology data on an internet server (for example, the <a class="reference external" href="https://www.internationalbrainlab.com/">International Brain Lab</a>). The Open Neurophysiology Environment (ONE) provides a way for scientists to analyze data from multiple data providers using the same analysis code. There is no need for the scientist to explicitly download data files or understand their format - this is all handled seamlessly by the ONE framework. The ONE protocol can also be used to access a scientist’s own experiments stored on their personal computer, but we do not describe this use-case here.</p>
<p>When a user wants to analyze data released by a provider, they first import that provider’s loader functions. In python, to analyze IBL data, they would type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">one_ibl.one</span> <span class="k">import</span> <span class="n">ONE</span>
</pre></div>
</div>
<p>Because it is up to data providers to maintain the loader functions, all a user needs to do to work with data from a specific provider is import their loader module. To analyze Allen data, they could instead type <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">one_allen</span></code>. After that, all other analysis code will be the same, regardless of which provider’s data they are analyzing.</p>
<p>Every experiment a data provider releases is identified by an <em>experiment ID</em> (eID) – a small token that uniquely identifies a particular experiment. It is up to the data provider to specify the format of their eIDs.</p>
<div class="section" id="loading-data">
<span id="loading-data"></span><h3>Loading data<a class="headerlink" href="#loading-data" title="Permalink to this headline">¶</a></h3>
<p>If a user already knows the eID of an experiment they are interested in, they can load data for the experiment using a command like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">st</span><span class="p">,</span> <span class="n">sc</span><span class="p">,</span> <span class="n">cbl</span> <span class="o">=</span> <span class="n">ONE</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">eID</span><span class="p">,</span> <span class="n">dataset_types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;spikes.times&#39;</span><span class="p">,</span> <span class="s1">&#39;spikes.clusters&#39;</span><span class="p">,</span> <span class="s1">&#39;clusters.brain_location&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>This command will download three datasets containing the times and cluster assignments of all spikes recorded in that experiment, together with an estimate of the brain location of each cluster. (In practice, the data will be cached on the user’s local machine so it can be loaded repeatedly with only one download.)</p>
<p>Many neural data signals are time series, and synchronizing these signals is often challenging. ONE would provide a function to interpolate any required timeseries to an evenly or unevenly-sampled timescale of the user’s choice. For example the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hxy</span><span class="p">,</span> <span class="n">hth</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">ONE</span><span class="o">.</span><span class="n">loadTS</span><span class="p">(</span><span class="n">eID</span><span class="p">,</span> <span class="n">dataset_types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;headTracking.xyPos&#39;</span><span class="p">,</span> <span class="s1">&#39;lfp.raw&#39;</span><span class="p">],</span> <span class="n">sample_rate</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>would interpolate head position and lfp to a common 1000 Hz sampling rate. The sample times are returned as <code class="docutils literal notranslate"><span class="pre">t</span></code>.</p>
</div>
<div class="section" id="searching-for-experiments">
<span id="searching-for-experiments"></span><h3>Searching for experiments<a class="headerlink" href="#searching-for-experiments" title="Permalink to this headline">¶</a></h3>
<p>Finally, a user needs to be able to search the data released by a provider, to obtain the eIDs of experiments they want to analyze. To do so they would run a command like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">eIDs</span><span class="p">,</span> <span class="n">eInfo</span> <span class="o">=</span> <span class="n">ONE</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">lab</span><span class="o">=</span><span class="s1">&#39;CortexLabUCL&#39;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="s1">&#39;hercules&#39;</span><span class="p">,</span> <span class="n">dataset_types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;spikes.times&#39;</span><span class="p">,</span> <span class="s1">&#39;spikes.clusters&#39;</span><span class="p">,</span><span class="s1">&#39;headTracking.xyPos&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>This would find the eIDs for all experiments collected in the specified lab for the specified experimental subject, for which all of the required data is present. There will be more metadata options to refine the search (e.g. dates, genotypes, experimenter), and additional metadata on each matching experiment is returned in <code class="docutils literal notranslate"><span class="pre">eInfo</span></code>. However, the existence of dataset types is normally enough to find the data you want. For example, if you want to analyze electrophysiology in a particular behavior task, the experiments you want are exactly those with datasets describing the ephys recordings and that task’s parameters.</p>
</div>
</div>
<div class="section" id="standardization">
<span id="standardization"></span><h2>Standardization<a class="headerlink" href="#standardization" title="Permalink to this headline">¶</a></h2>
<p>The key to ONE’s standardization is the concept of a “standard dataset type”. When a user requests one of these (such as <code class="docutils literal notranslate"><span class="pre">'spikes.times'</span></code>), they are guaranteed that each data provider will return them the same information, organized in the same way - in this case, the times of all extracellularly recorded spikes, measured in seconds relative to experiment start, and returned as a 1-dimensional column vector. It is guaranteed that any dataset types of the form <code class="docutils literal notranslate"><span class="pre">*.times</span></code> or <code class="docutils literal notranslate"><span class="pre">*.*_times</span></code> will be measured in seconds relative to experiment start. Furthermore, all dataset types differing only in their last word (e.g. <code class="docutils literal notranslate"><span class="pre">spikes.times</span></code> and <code class="docutils literal notranslate"><span class="pre">spikes.clusters</span></code>) will have the same number of rows, describing multiple attributes of the same objects. Finally, words matching across dataset types encode references: for example, <code class="docutils literal notranslate"><span class="pre">spikes.clusters</span></code> is guaranteed to contain integers, and to find the brain location of each of these one looks to the corresponding row of <code class="docutils literal notranslate"><span class="pre">clusters.brain_location</span></code>, counting from 0.</p>
<p>Not all data can be standardized, since each project will do unique experiments. Data providers can thereform add their own project-specific dataset types. The list of standard dataset types will be maintained centrally, and will start small but increase over time as the community converges on good ways to standardize more information. It is therefore important to distinguish dataset types agreed as universal standards from types specific to individual projects. To achieve this, names beginning with an underscore are guaranteed never to be standard. It is recommended that nonstandard names identify the group that produces them: for example the dataset types <code class="docutils literal notranslate"><span class="pre">_ibl_trials.stimulusContrast</span></code> and <code class="docutils literal notranslate"><span class="pre">clusters._ibl_task_modulation</span></code> could contain information specific to the IBL project.</p>
</div>
<div class="section" id="ease-of-use">
<span id="ease-of-use"></span><h2>Ease of use<a class="headerlink" href="#ease-of-use" title="Permalink to this headline">¶</a></h2>
<p>Data standards are only adopted when they are easy to use, for both providers and users of data. For users, the three ONE functions will be simple to learn, and will cover most common use cases.</p>
<p>For providers, a key advantage of this framework is its low barrier to entry. To share data with ONE, providers will not need to run and maintain a backend server, just to upload their data to a website. We will provide a reference implementation of the ONE loader functions that searches, downloads and caches files from a web server. This will allow producers who do not have in-house computational staff two simple paths to achieve ONE compatibility. The first is to upload data to a website using a standard file-naming convention [<a class="reference external" href="https://github.com/cortex-lab/ALF">here</a>], in standard formats including <code class="docutils literal notranslate"><span class="pre">npy</span></code>, <code class="docutils literal notranslate"><span class="pre">csv</span></code>, <code class="docutils literal notranslate"><span class="pre">json</span></code>, and <code class="docutils literal notranslate"><span class="pre">tiff</span></code>, which will allow users to read it using the reference implementation. The second is to post data on a web site using their own file-naming conventions and formats, then clone and adapt our reference implementation to their specific formats.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, International Brain Laboratory.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>